(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{105:function(e,t){},109:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-blue-infected.5c22be59.png"},110:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-green-infected.673a619b.png"},111:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-red-infected.26732e3d.png"},112:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-yellow-infected.01546c5c.png"},113:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-blue-treated.f18def56.png"},114:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-green-treated.da0f1e0e.png"},115:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-red-treated.0ab3321e.png"},116:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-yellow-treated.d10d4532.png"},117:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-blue-cured.49a03bfa.png"},118:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-green-cured.c0c307c2.png"},119:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-red-cured.30273bdd.png"},120:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-yellow-cured.5345da97.png"},168:function(e,t,n){},169:function(e,t,n){},193:function(e,t){},195:function(e,t){},237:function(e,t){},244:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/lek-blue.ab0e3daf.png"},245:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/lek-green.2ab04cf1.png"},246:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/lek-red.ed237b10.png"},247:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/lek-yellow.ee162b90.png"},248:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-blue.ab4ac3e2.png"},249:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-green.d759c213.png"},250:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-red.d9a41123.png"},251:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/organ-yellow.e36be9f1.png"},252:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/wirus-blue.ebbbb969.png"},253:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/wirus-green.312e2da7.png"},254:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/wirus-red.d0668b7e.png"},255:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/wirus-yellow.ae1f8970.png"},264:function(e,t){},266:function(e,t){},291:function(e,t){},293:function(e,t){},294:function(e,t){},299:function(e,t){},301:function(e,t){},320:function(e,t){},332:function(e,t){},335:function(e,t){},339:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(162),s=n.n(a),r=(n(168),n(2)),o=(n(169),n(11)),i=n(5),l=n(41),u=n.n(l),d=n(7),j=n(3),b=n.n(j),g=n(8),p=n.n(g),h=n(163),f={usersReload:!1,gamesReload:!1,mainChatReload:!1,mainChat:[],gameReload:!1,gamePlayersReload:!1,gameChatReload:!1,gameChat:[],messagesReload:!1,messages:[],invitesReload:!1,invites:[],client:n.n(h).a.connect("ws://127.0.0.1:8082/mqtt")};f.client.on("message",(function(e,t){"/login"!==e&&"/logout"!==e&&"/guest"!==e||(console.log(t.toString()),f.usersReload=!0),"/login"!==e||t.toString().startsWith("guest")||"edit"===t.toString()||(f.mainChat.push(t.toString()+" has joined the chat"),f.mainChatReload=!0),"/logout"!==e||t.toString().startsWith("guest")||(f.mainChat.push(t.toString()+" has left the chat"),f.mainChatReload=!0),"/games"===e&&(console.log(t.toString()),f.gamesReload=!0),"/main-chat"===e&&(console.log(t.toString()),f.mainChat.push(t.toString()),f.mainChatReload=!0),e.startsWith("/game/")&&(console.log(t.toString()),f.gameReload=!0),e.startsWith("/players/")&&(console.log(t.toString()),f.gamePlayersReload=!0),e.startsWith("/chat/")&&(console.log(t.toString()),f.gameChat.push(t.toString()),f.gameChatReload=!0),e.startsWith("/messages/")&&(console.log(JSON.parse(t.toString())),f.messages.push(JSON.parse(t.toString())),f.messagesReload=!0),e.startsWith("/invites/")&&(console.log(JSON.parse(t.toString())),f.invites.find((function(e){return e.id===JSON.parse(t.toString()).id}))||(f.invites.push(JSON.parse(t.toString())),f.invitesReload=!0))}));var O=f,m=n(0);var x=function(e){var t=e.setMainLogin,n=Object(i.f)(),a=Object(c.useState)(""),s=Object(r.a)(a,2),l=s[0],u=s[1],j=Object(c.useState)(""),g=Object(r.a)(j,2),h=g[0],f=g[1],x=Object(c.useState)(""),v=Object(r.a)(x,2),y=v[0],w=v[1];return Object(m.jsxs)("div",{className:"login-page",children:[Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{children:" Login: "}),Object(m.jsx)("input",{type:"text",id:"login",onChange:function(e){u(e.target.value)}}),Object(m.jsx)("label",{children:" Password: "}),Object(m.jsx)("input",{type:"password",id:"password",onChange:function(e){f(e.target.value)}})]}),y&&Object(m.jsx)("div",{className:"error",children:y}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){p.a.post("http://localhost:5000/login",{login:l,password:h},{withCredentials:!0}).then(function(){var e=Object(d.a)(b.a.mark((function e(c){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(c.data),t(c.data.login),O.client.subscribe("/messages/".concat(c.data.login,"/+")),O.client.subscribe("/messages/+/".concat(c.data.login)),O.client.publish("/login",c.data.login),n("/games");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){e.response&&401===e.response.status?w("Wrong login or password"):console.log(e)}))},children:" Login "})}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){p.a.post("http://localhost:5000/guest",{},{withCredentials:!0}).then(function(){var e=Object(d.a)(b.a.mark((function e(c){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(c.data),t(c.data.login),O.client.subscribe("/messages/".concat(c.data.login,"/+")),O.client.subscribe("/messages/+/".concat(c.data.login)),O.client.subscribe("/invites/".concat(c.data.login)),O.client.publish("/guest",c.data.login),n("/games");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){alert("Wyst\u0105pi\u0142 b\u0142\u0105d"),console.log(e)}))},children:" Login as guest "})}),Object(m.jsx)(o.b,{to:"/register",children:Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){},children:" Register "})})}),Object(m.jsx)(o.b,{to:"/",children:Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){},children:" Cancel "})})})]})};var v=function(){var e=Object(i.f)(),t=Object(c.useState)(""),n=Object(r.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)(""),l=Object(r.a)(o,2),u=l[0],j=l[1],g=Object(c.useState)(""),h=Object(r.a)(g,2),f=h[0],O=h[1];return Object(m.jsxs)("div",{className:"login-page",children:[Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{children:" Login: "}),Object(m.jsx)("input",{type:"text",id:"login",onChange:function(e){s(e.target.value)}}),Object(m.jsx)("label",{children:" Password: "}),Object(m.jsx)("input",{type:"password",id:"password",onChange:function(e){j(e.target.value)}})]}),f&&Object(m.jsx)("div",{className:"error",children:f}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){a.length>0&&u.length>0&&p.a.post("http://localhost:5000/register",{login:a,password:u}).then(function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(n.data),alert("Zarejestrowano jako "+n.data.login),e("/login");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){e.response&&401===e.response.status?O("Login is already taken"):console.log(e)}))},children:" Register "})}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){e("/login")},children:" Cancel "})})]})},y=n(42);var w=function(e){var t=e.login,n=e.setMainLogin,a=Object(i.f)(),s=Object(c.useState)([]),l=Object(r.a)(s,2),u=l[0],j=l[1],g=Object(c.useState)([]),h=Object(r.a)(g,2),f=h[0],x=h[1],v=Object(c.useState)([]),w=Object(r.a)(v,2),C=w[0],k=w[1],S=Object(c.useState)(""),N=Object(r.a)(S,2),R=N[0],T=N[1],P=Object(c.useState)(""),L=Object(r.a)(P,2),D=L[0],E=L[1],W=Object(c.useState)([]),M=Object(r.a)(W,2),U=M[0],I=M[1];function J(){O.usersReload&&p.a.get("http://localhost:5000/online-users").then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)})).finally((function(){O.usersReload=!1})),O.gamesReload&&p.a.get("http://localhost:5000/games/?search=".concat(D)).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)})).finally((function(){O.gamesReload=!1})),O.mainChatReload&&(k(O.mainChat),O.mainChatReload=!1),O.invitesReload&&(I(O.invites),O.invitesReload=!1)}function _(e){T(e.target.value),13===e.keyCode&&F()}function F(){R.trim().length>0&&(O.client.publish("/main-chat","".concat(t,": ").concat(R)),k([].concat(Object(y.a)(C),["".concat(t,": ").concat(R)])),T(""))}function G(){p.a.get("http://localhost:5000/games/?search=".concat(D)).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)}))}return Object(c.useEffect)((function(){return O.client.subscribe("/games"),O.client.subscribe("/login"),O.client.subscribe("/logout"),O.client.subscribe("/guest"),O.client.subscribe("/main-chat"),t&&(O.client.subscribe("/messages/".concat(t,"/+")),O.client.subscribe("/messages/+/".concat(t)),O.client.subscribe("/invites/".concat(t))),k(O.mainChat),I(O.invites),J(),p.a.get("http://localhost:5000/games").then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)})),p.a.get("http://localhost:5000/online-users").then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)})),function(){j([]),x([])}}),[]),setInterval(J,1e3),Object(m.jsxs)("div",{className:"games-page",children:[Object(m.jsx)("h1",{children:"WIRUS"}),Object(m.jsxs)("div",{className:"user-menu",children:[""!==t&&Object(m.jsxs)("h3",{children:[" Logged as:",Object(m.jsx)(o.b,{to:"/users/".concat(t),style:{color:"inherit",textDecoration:"inherit"},children:Object(m.jsx)("div",{children:t})})]}),""!==t&&Object(m.jsx)("button",{onClick:function(){p.a.post("http://localhost:5000/logout",{login:t},{withCredentials:!0}).then(function(){var e=Object(d.a)(b.a.mark((function e(c){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(c.data),O.client.unsubscribe("/messages/".concat(t,"/+")),O.client.unsubscribe("/messages/+/".concat(t)),O.client.publish("/logout",t),n(""),O.messages=[];case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)})).finally((function(){J()}))},children:" Log Out "}),""===t&&Object(m.jsx)(o.b,{to:"/login",children:Object(m.jsx)("button",{children:" Log In "})}),""!==t&&Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){var e=prompt("Podaj nazw\u0119 pokoju");e&&p.a.post("http://localhost:5000/games/",{admin:t,name:e}).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.data),j([].concat(Object(y.a)(u),[t.data])),O.client.publish("/games",t.data.name),a("/games/"+t.data.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)}))},children:" Create room "})}),U.length>0&&Object(m.jsxs)("div",{className:"invitesSection",children:[Object(m.jsx)("h3",{children:"Invites:"}),Object(m.jsx)("div",{className:"invites",children:U.map((function(e){return Object(m.jsx)("div",{className:"invite",children:Object(m.jsx)(o.b,{to:"/games/".concat(e.id),style:{color:"inherit",textDecoration:"inherit"},children:e.name})},e.id)}))})]})]}),Object(m.jsxs)("div",{className:"chat",children:[Object(m.jsx)("div",{children:C.map((function(e,t){return Object(m.jsx)("p",{children:e},t)}))}),t&&Object(m.jsx)("input",{type:"text",value:R,onChange:_,onKeyUp:_}),t&&Object(m.jsx)("button",{onClick:F,children:" Send "})]}),Object(m.jsxs)("div",{className:"users-list",children:[0===f.length&&Object(m.jsx)("h3",{children:" No users online "}),f.length>0&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Online users:"}),Object(m.jsx)("div",{children:f.map((function(e){return Object(m.jsx)(o.b,{style:{color:"inherit",textDecoration:"inherit"},to:"/users/".concat(e.login),children:Object(m.jsx)("div",{children:e.login})},e.login)}))})]})]}),Object(m.jsxs)("div",{className:"rooms-list",children:[Object(m.jsxs)("div",{className:"search",children:[Object(m.jsx)("input",{type:"text",value:D,onChange:function(e){E(e.target.value)},onKeyUp:function(e){13===e.keyCode&&G()}}),Object(m.jsx)("button",{onClick:G,children:" Search "})]}),0===u.length&&Object(m.jsx)("h3",{children:" No rooms available "}),u.length>0&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Available rooms:"}),u.map((function(e){return"public"===e.status?Object(m.jsx)(o.b,{style:{color:"inherit",textDecoration:"inherit"},to:"/games/".concat(e.id),children:Object(m.jsxs)("div",{className:"room",children:[Object(m.jsx)("h3",{children:e.name}),Object(m.jsxs)("div",{children:[e.players.length," / ",e.maxPlayers]}),e.gameStarted&&Object(m.jsx)("h4",{children:"(started)"})]})},e.id):"private"===e.status?Object(m.jsxs)("div",{className:"unavailable room",children:[Object(m.jsx)("h3",{children:e.name}),Object(m.jsxs)("div",{children:[e.players.length," / ",e.maxPlayers]})]},e.id):null}))]})]})]})},C=n(22);var k=function(e){var t=e.login,a=e.setGame2,s=e.inGame,o=e.Reload,l=Object(i.g)().id,u=Object(c.useState)({}),j=Object(r.a)(u,2),g=j[0],h=j[1],f=Object(c.useState)([]),x=Object(r.a)(f,2),v=x[0],y=x[1],w=Object(c.useState)({}),C=Object(r.a)(w,2),k=C[0],S=C[1],N=Object(c.useState)({}),R=Object(r.a)(N,2),T=R[0],P=R[1],L=Object(c.useState)({}),D=Object(r.a)(L,2),E=D[0],W=D[1],M=Object(c.useState)(""),U=Object(r.a)(M,2),I=U[0],J=U[1],_=Object(c.useState)(!1),F=Object(r.a)(_,2),G=F[0],A=F[1],V=Object(c.useState)(""),K=Object(r.a)(V,2),z=K[0],Y=K[1];function q(){O.gameReload&&p.a.get("http://localhost:5000/games/".concat(l)).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t.data),y(t.data.players),S(t.data.playersCards),P(t.data.playersOrgans);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)})).finally((function(){O.gameReload=!1,O.gamePlayersReload=!1}))}return Object(c.useEffect)((function(){return p.a.get("http://localhost:5000/games/".concat(l)).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t.data),y(t.data.players),S(t.data.playersCards),P(t.data.playersOrgans);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)})),q(),o(),function(){h({}),y([]),S({}),P({})}}),[l]),setInterval(q,1e3),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"oponents",children:v.filter((function(e){return e.login!==t})).map((function(e,t){return e.login===I?Object(m.jsx)("button",{onClick:function(){return J(e.login)},className:"chosen",children:Object(m.jsxs)("div",{className:"oponent",children:[Object(m.jsx)("h3",{children:e.login}),T[e.login]&&T[e.login].map((function(e,t){return e.infected?Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(57)("./".concat(e.cardType,"-").concat(e.cardColor,"-infected.png")).default,alt:e.cardColor+e.cardType})},t):e.treated&&!e.cured?Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(58)("./".concat(e.cardType,"-").concat(e.cardColor,"-treated.png")).default,alt:e.cardColor+e.cardType})},t):e.cured?Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(59)("./".concat(e.cardType,"-").concat(e.cardColor,"-cured.png")).default,alt:e.cardColor+e.cardType})},t):Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(34)("./".concat(e.cardType,"-").concat(e.cardColor,".png")).default,alt:e.cardColor+e.cardType})},t)}))]},t)},t):Object(m.jsx)("button",{onClick:function(){return J(e.login)},children:Object(m.jsxs)("div",{className:"oponent",children:[Object(m.jsx)("h3",{children:e.login}),T[e.login]&&T[e.login].map((function(e,t){return e.infected?Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(57)("./".concat(e.cardType,"-").concat(e.cardColor,"-infected.png")).default,alt:e.cardColor+e.cardType})},t):e.treated&&!e.cured?Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(58)("./".concat(e.cardType,"-").concat(e.cardColor,"-treated.png")).default,alt:e.cardColor+e.cardType})},t):e.cured?Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(59)("./".concat(e.cardType,"-").concat(e.cardColor,"-cured.png")).default,alt:e.cardColor+e.cardType})},t):Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(34)("./".concat(e.cardType,"-").concat(e.cardColor,".png")).default,alt:e.cardColor+e.cardType})},t)}))]},t)},t)}))}),!G&&Object(m.jsx)("div",{children:v.filter((function(e){return e===v[g.turn]})).map((function(e,t){return Object(m.jsx)("div",{children:Object(m.jsxs)("h3",{children:["Kolejka: ",e.login]})},t)}))}),G&&Object(m.jsx)("div",{children:Object(m.jsxs)("h3",{children:["Wygra\u0142 gracz: ",G]})}),s&&Object(m.jsxs)("div",{className:"player",children:[Object(m.jsxs)("div",{className:"organs",children:[Object(m.jsx)("h3",{children:"Your organs"}),T[t]&&T[t].map((function(e,t){return e.infected?Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(57)("./".concat(e.cardType,"-").concat(e.cardColor,"-infected.png")).default,alt:e.cardColor+e.cardType})},t):e.treated&&!e.cured?Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(58)("./".concat(e.cardType,"-").concat(e.cardColor,"-treated.png")).default,alt:e.cardColor+e.cardType})},t):e.cured?Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(59)("./".concat(e.cardType,"-").concat(e.cardColor,"-cured.png")).default,alt:e.cardColor+e.cardType})},t):Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("img",{src:n(34)("./".concat(e.cardType,"-").concat(e.cardColor,".png")).default,alt:e.cardColor+e.cardType})},t)}))]}),Object(m.jsxs)("div",{className:"cards",children:[Object(m.jsx)("h3",{children:"Your cards"}),k[t]&&k[t].map((function(e,t){return e===E?Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("button",{className:"chosen",children:Object(m.jsx)("img",{src:n(34)("./".concat(e.cardType,"-").concat(e.cardColor,".png")).default,alt:e.cardColor+e.cardType})})},t):Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("button",{onClick:function(){return W(e)},children:Object(m.jsx)("img",{src:n(34)("./".concat(e.cardType,"-").concat(e.cardColor,".png")).default,alt:e.cardColor+e.cardType})})},t)})),v.find((function(e){return e.login===t}))===v[g.turn]&&Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:function(){void 0!==E.cardColor&&void 0!==E.cardType&&p.a.post("http://localhost:5000/games/play/".concat(l),{login:t,card:E,target:I}).then(function(){var e=Object(d.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.client.publish("/game/".concat(l),l),console.log(n.data),h(n.data.game),y(n.data.game.players),S(n.data.game.playersCards),P(n.data.game.playersOrgans),A(n.data.win),Y(""),n.data.win&&(O.client.publish("/chat/".concat(l),"".concat(t," won the game!")),a(n.data.game),o());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&(Y(e.response.data),console.log(e.response.data))})).finally((function(){W({}),J(""),q(),o()}))},children:"Play"}),Object(m.jsx)("button",{onClick:function(){void 0!==E.cardColor&&void 0!==E.cardType&&p.a.post("http://localhost:5000/games/discard/".concat(l),{login:t,card:E}).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.client.publish("/game/".concat(l),l),console.log(t.data),h(t.data),y(t.data.players),S(t.data.playersCards),P(t.data.playersOrgans),Y("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&(Y(e.response.data),console.log(e.response.data))})).finally((function(){W({}),q()}))},children:"Discard"})]}),z&&Object(m.jsx)("div",{className:"error",children:z})]})]})]})};var S=function(e){var t=e.login,n=Object(i.f)(),a=Object(i.g)().id,s=Object(c.useState)({}),o=Object(r.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)({}),g=Object(r.a)(j,2),h=g[0],f=g[1],x=Object(c.useState)([{login:""}]),v=Object(r.a)(x,2),w=v[0],S=v[1],N=Object(c.useState)(!1),R=Object(r.a)(N,2),T=R[0],P=R[1],L=Object(c.useState)(!1),D=Object(r.a)(L,2),E=D[0],W=D[1],M=Object(c.useState)({}),U=Object(r.a)(M,2),I=U[0],J=U[1],_=Object(c.useState)([]),F=Object(r.a)(_,2),G=F[0],A=F[1],V=Object(c.useState)(""),K=Object(r.a)(V,2),z=K[0],Y=K[1],q=Object(c.useState)(!1),B=Object(r.a)(q,2),H=B[0],Z=B[1],Q=Object(c.useState)(""),X=Object(r.a)(Q,2),$=X[0],ee=X[1],te=Object(c.useState)([]),ne=Object(r.a)(te,2),ce=ne[0],ae=ne[1],se=Object(c.useState)(""),re=Object(r.a)(se,2),oe=re[0],ie=re[1];function le(){(O.gameReload||O.gamePlayersReload)&&p.a.get("http://localhost:5000/games/".concat(a)).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.data),u(t.data),f(t.data.admin),S(t.data.players);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&404===e.response.status?ue():e.response&&console.log(e.response.data)})).finally((function(){O.gameReload=!1,O.gamePlayersReload=!1})),O.gameChatReload&&(A(O.gameChat),O.gameChatReload=!1)}function ue(){O.client.unsubscribe("/game/".concat(a)),O.client.unsubscribe("/players/".concat(a)),O.client.unsubscribe("/chat/".concat(a)),n("/games")}function de(e){Y(e.target.value),13===e.keyCode&&je()}function je(){z.trim().length>0&&(O.client.publish("/chat/".concat(a),"".concat(t,": ").concat(z)),A([].concat(Object(y.a)(G),["".concat(t,": ").concat(z)])),Y(""))}return Object(c.useEffect)((function(){return O.client.unsubscribe("/games"),O.client.unsubscribe("/login"),O.client.unsubscribe("/logout"),O.client.unsubscribe("/guest"),O.client.unsubscribe("/main-chat"),O.client.subscribe("/game/".concat(a)),O.client.subscribe("/players/".concat(a)),O.client.subscribe("/chat/".concat(a)),t&&(O.client.subscribe("/messages/".concat(t,"/+")),O.client.subscribe("/messages/+/".concat(t)),O.client.subscribe("/invites/".concat(t))),O.gameChat=[],p.a.get("http://localhost:5000/games/".concat(a)).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.data),u(t.data),f(t.data.admin),S(t.data.players);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&(console.log(e.response.data),ie(e.response.data))})),function(){u({}),f({}),S([])}}),[a]),Object(c.useEffect)((function(){if(void 0!==w&&0!==w.length||(O.client.publish("/games",a),ue()),void 0!==w)for(var e=0;e<w.length;e++){if(w[e].login===t){P(!0);break}P(!1)}}),[w]),setInterval(le,1e3),Object(m.jsxs)(m.Fragment,{children:[!oe&&Object(m.jsx)("div",{children:w&&Object(m.jsxs)("div",{className:"game-page",children:[Object(m.jsx)("h1",{children:l.name}),Object(m.jsxs)("div",{className:"menu",children:[(t!==h.login||!1===E)&&Object(m.jsxs)("div",{className:"info",children:[Object(m.jsxs)("div",{children:["maxPlayers: ",l.maxPlayers]}),Object(m.jsxs)("div",{children:["Status: ",l.status]}),Object(m.jsxs)("div",{children:["Admin: ",h.login]}),Object(m.jsxs)("div",{children:["Players: ",w.length]})]}),t===h.login&&!0===E&&Object(m.jsx)("div",{className:"edit-game info",children:Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"Nazwa gry:"}),Object(m.jsx)("input",{type:"text",defaultValue:l.name,onChange:function(e){return J(Object(C.a)(Object(C.a)({},I),{},{name:e.target.value}))}})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:" Admin: "}),Object(m.jsx)("select",{defaultValue:h.login,onChange:function(e){return J(Object(C.a)(Object(C.a)({},I),{},{admin:e.target.value}))},children:w.map((function(e){return Object(m.jsx)("option",{value:e.login,children:e.login},e.login)}))})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:" maxPlayers: "}),Object(m.jsxs)("select",{defaultValue:l.maxPlayers,onChange:function(e){return J(Object(C.a)(Object(C.a)({},I),{},{maxPlayers:e.target.value}))},children:[Object(m.jsx)("option",{value:"2",children:"2"}),Object(m.jsx)("option",{value:"3",children:"3"}),Object(m.jsx)("option",{value:"4",children:"4"}),Object(m.jsx)("option",{value:"5",children:"5"})]})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:" Status: "}),Object(m.jsxs)("select",{defaultValue:l.status,onChange:function(e){return J(Object(C.a)(Object(C.a)({},I),{},{status:e.target.value}))},children:[Object(m.jsx)("option",{value:"public",children:"public"}),Object(m.jsx)("option",{value:"private",children:"private"})]})]})]})}),t===h.login&&!1===E&&!l.gameStarted&&w.length>1&&Object(m.jsx)("button",{onClick:function(){p.a.post("http://localhost:5000/games/start/".concat(a)).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.client.publish("/game/".concat(a),a),console.log(t.data),u(t.data),f(t.data.admin),S(t.data.players);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)}))},children:" Start game "}),t===h.login&&!1===E&&!l.gameStarted&&Object(m.jsx)("button",{onClick:function(){return W(!0)},children:" Edit "}),t===h.login&&!0===E&&Object(m.jsx)("button",{onClick:function(){p.a.put("http://localhost:5000/games/".concat(a),{name:I.name,maxPlayers:I.maxPlayers,status:I.status,admin:I.admin}).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.data),u(t.data),f(t.data.admin),O.client.publish("/game/".concat(a),a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)})).finally((function(){W(!1),J({})}))},children:" Save "}),t===h.login&&!0===E&&Object(m.jsx)("button",{onClick:function(){W(!1),J({})},children:" Cancel "}),""!==t&&Object(m.jsxs)("div",{children:[!1===T&&w.length<l.maxPlayers&&!l.gameStarted&&Object(m.jsx)("button",{onClick:function(){p.a.post("http://localhost:5000/games/join",{id:a,login:t}).then(function(){var e=Object(d.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n.data),S(n.data.players),P(!0),O.client.publish("/players/".concat(a),t),O.client.publish("/chat/".concat(a),"".concat(t," has joined the game"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)}))},children:" Join game "}),!0===T&&Object(m.jsx)("button",{onClick:function(){p.a.post("http://localhost:5000/games/leave",{login:t}).then(function(){var e=Object(d.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(!1),console.log(n.data),O.client.publish("/players/".concat(a),t),O.client.publish("/chat/".concat(a),"".concat(t," has left the game")),S(n.data.players);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)}))},children:" Leave game "})]}),!1===T&&Object(m.jsx)("button",{onClick:ue,children:" Go back "})]}),Object(m.jsxs)("div",{className:"players",children:[Object(m.jsx)("h2",{children:"Players:"}),w.map((function(e){return Object(m.jsxs)("div",{children:[" ",e.login," "]},e.login)})),t===h.login&&!H&&Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){Z(!0),p.a.get("http://localhost:5000/online-users").then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ae(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)}))},children:" Invite player "})}),H&&Object(m.jsxs)("form",{children:[Object(m.jsx)("select",{defaultValue:h.login,onChange:function(e){return ee(e.target.value)},children:ce.map((function(e){return Object(m.jsx)("option",{value:e.login,children:e.login},e.login)}))}),Object(m.jsx)("button",{type:"button",onClick:function(){Z(!1),O.client.publish("/invites/".concat($),JSON.stringify({id:a,name:l.name}))},children:" Invite "}),Object(m.jsx)("button",{type:"button",onClick:function(){return Z(!1)},children:" Cancel "})]})]}),Object(m.jsxs)("div",{className:"game-chat",children:[Object(m.jsx)("div",{children:G.map((function(e,t){return Object(m.jsx)("p",{children:e},t)}))}),t&&Object(m.jsx)("input",{type:"text",value:z,onChange:de,onKeyUp:de}),t&&Object(m.jsx)("button",{onClick:je,children:" Send "})]}),!l.gameStarted&&Object(m.jsx)("div",{className:"game wait-container",children:Object(m.jsx)("h1",{className:"wait",children:" Wait for admin to start the game "})}),l.gameStarted&&Object(m.jsx)("div",{className:"game",children:Object(m.jsx)(k,{login:t,setGame2:u,inGame:T,Reload:le})})]})}),oe&&Object(m.jsxs)("h1",{children:[" ",oe," "]})]})},N=n(80),R=n.n(N);var T=function(e){var t=e.userLogin,n=e.setMainLogin,a=Object(i.f)(),s=Object(i.g)().login,l=Object(c.useState)({}),j=Object(r.a)(l,2),g=j[0],h=j[1],f=Object(c.useState)(!1),x=Object(r.a)(f,2),v=x[0],y=x[1],w=Object(c.useState)(""),C=Object(r.a)(w,2),k=C[0],S=C[1],N=Object(c.useState)(""),T=Object(r.a)(N,2),P=T[0],L=T[1],D=Object(c.useState)(""),E=Object(r.a)(D,2),W=E[0],M=E[1],U=Object(c.useState)(!1),I=Object(r.a)(U,2),J=I[0],_=I[1],F=Object(c.useState)(!1),G=Object(r.a)(F,2),A=G[0],V=G[1],K=Object(c.useState)(!1),z=Object(r.a)(K,2),Y=z[0],q=z[1],B=Object(c.useState)(""),H=Object(r.a)(B,2),Z=H[0],Q=H[1],X=Object(c.useState)([]),$=Object(r.a)(X,2),ee=$[0],te=$[1];function ne(){S(""),L(""),M(""),y(!1),_(!1),V(!1),q(!1),Q("")}return Object(c.useEffect)((function(){return t&&(O.client.subscribe("/messages/".concat(t,"/+")),O.client.subscribe("/messages/+/".concat(t)),O.client.subscribe("/invites/".concat(t))),p.a.get("http://localhost:5000/".concat(s)).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&401===e.response.status?h(void 0):e.response&&console.log(e.response.data)})),te(O.messages),function(){h({})}}),[s]),setInterval((function(){O.usersReload&&p.a.get("http://localhost:5000/".concat(s)).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&401===e.response.status?h(void 0):e.response&&console.log(e.response.data)})).finally((function(){O.usersReload=!1})),O.messagesReload&&(te(O.messages),O.messagesReload=!1)}),1e3),Object(m.jsxs)(m.Fragment,{children:[!g&&Object(m.jsx)("h1",{children:"User not found"}),g&&Object(m.jsxs)("div",{className:"userPage",children:[Object(m.jsxs)("h1",{children:[g.login," PAGE"]}),Object(m.jsxs)("div",{className:"info",children:[Object(m.jsxs)("h3",{children:[g.login,g.loggedIn&&Object(m.jsx)("div",{className:"online",children:"(online)"})]}),v&&Object(m.jsxs)("form",{children:[J&&Object(m.jsx)("div",{className:"wrongPassword",children:"Wrong password"}),Object(m.jsx)("label",{children:" New login: "}),Object(m.jsx)("input",{type:"text",id:"login",onChange:function(e){return M(e.target.value)}}),Object(m.jsx)("label",{children:" New password: "}),Object(m.jsx)("input",{type:"password",id:"newpassword",onChange:function(e){return S(e.target.value)}}),Object(m.jsx)("label",{children:" Old password: "}),Object(m.jsx)("input",{type:"password",id:"oldpassword",onChange:function(e){return L(e.target.value)}}),Object(m.jsx)("button",{type:"button",onClick:function(){R.a.compareSync(P,g.password)?p.a.put("http://localhost:5000/".concat(s),{login:W,password:k}).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.client.publish("/login","edit"),n(t.data.login),ne(),u.a.set("login",t.data.login),a("/users/".concat(t.data.login));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)})):_(!0)},children:" Save "}),Object(m.jsx)("button",{type:"button",onClick:ne,children:" Cancel "})]}),A&&Object(m.jsxs)("form",{children:[J&&Object(m.jsx)("div",{className:"wrongPassword",children:"Wrong password"}),Object(m.jsx)("label",{children:" Password: "}),Object(m.jsx)("input",{type:"password",id:"password",onChange:function(e){return L(e.target.value)}}),Object(m.jsx)("button",{type:"button",onClick:function(){R.a.compareSync(P,g.password)?p.a.delete("http://localhost:5000/".concat(s)).then(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.client.publish("/login","edit"),n(""),ne(),u.a.remove("login"),a("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.response&&console.log(e.response.data)})):_(!0)},children:" Delete "}),Object(m.jsx)("button",{type:"button",onClick:ne,children:" Cancel "})]}),Y&&Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{children:" Message: "}),Object(m.jsx)("textarea",{id:"message",onChange:function(e){return Q(e.target.value)}}),Object(m.jsx)("button",{type:"button",onClick:function(){Z.trim().length>0&&(O.client.publish("/messages/".concat(s,"/").concat(t),JSON.stringify({from:t,to:s,message:Z,at:new Date})),Q(""),ne())},children:" Send "}),Object(m.jsx)("button",{type:"button",onClick:ne,children:" Cancel "})]}),g.login===t&&g.login&&!g.login.startsWith("guest-")&&!v&&Object(m.jsx)("button",{onClick:function(){return y(!0)},children:"Edit profile"}),g.login===t&&g.login&&!g.login.startsWith("guest-")&&!A&&Object(m.jsx)("button",{onClick:function(){return V(!0)},children:"Delete profile"}),!(g.login===t)&&t&&g.loggedIn&&!Y&&Object(m.jsx)("button",{onClick:function(){return q(!0)},children:" Send message "}),Object(m.jsx)("button",{onClick:function(){return a("/")},children:" Go back "})]}),t&&ee.length>0&&Object(m.jsxs)("div",{className:"messagesSection",children:[Object(m.jsx)("h2",{children:"Messages"}),Object(m.jsx)("div",{className:"messages",children:ee.map((function(e,t){return e.from===s||e.to===s?Object(m.jsxs)("div",{className:"message",children:[Object(m.jsxs)("div",{className:"from",children:["From:",Object(m.jsx)(o.b,{to:"/users/".concat(e.from),style:{color:"inherit",textDecoration:"inherit"},children:e.from})]}),Object(m.jsxs)("div",{className:"to",children:["To:",Object(m.jsx)(o.b,{to:"/users/".concat(e.to),style:{color:"inherit",textDecoration:"inherit"},children:e.to})]}),Object(m.jsxs)("div",{className:"at",children:["At: ",new Date(e.at).getHours(),":",new Date(e.at).getMinutes()]}),Object(m.jsx)("div",{className:"messageText",children:e.message})]},t):null}))})]})]})]})};var P=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e=u.a.get("login");e&&a(e)}),[]),Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(o.a,{children:Object(m.jsxs)(i.c,{children:[Object(m.jsx)(i.a,{exact:!0,path:"/",element:Object(m.jsx)(w,{login:n,setMainLogin:a})}),Object(m.jsx)(i.a,{exact:!0,path:"/login",element:Object(m.jsx)(x,{setMainLogin:a})}),Object(m.jsx)(i.a,{exact:!0,path:"/register",element:Object(m.jsx)(v,{})}),Object(m.jsx)(i.a,{exact:!0,path:"/games",element:Object(m.jsx)(w,{login:n,setMainLogin:a})}),Object(m.jsx)(i.a,{exact:!0,path:"/games/:id",element:Object(m.jsx)(S,{login:n})}),Object(m.jsx)(i.a,{exact:!0,path:"/users/:login",element:Object(m.jsx)(T,{userLogin:n,setMainLogin:a})})]})})})},L=n(341);s.a.render(Object(m.jsx)(L.a,{children:Object(m.jsx)(P,{})}),document.getElementById("root"))},34:function(e,t,n){var c={"./lek-blue.png":244,"./lek-green.png":245,"./lek-red.png":246,"./lek-yellow.png":247,"./organ-blue-cured.png":117,"./organ-blue-infected.png":109,"./organ-blue-treated.png":113,"./organ-blue.png":248,"./organ-green-cured.png":118,"./organ-green-infected.png":110,"./organ-green-treated.png":114,"./organ-green.png":249,"./organ-red-cured.png":119,"./organ-red-infected.png":111,"./organ-red-treated.png":115,"./organ-red.png":250,"./organ-yellow-cured.png":120,"./organ-yellow-infected.png":112,"./organ-yellow-treated.png":116,"./organ-yellow.png":251,"./wirus-blue.png":252,"./wirus-green.png":253,"./wirus-red.png":254,"./wirus-yellow.png":255};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}a.keys=function(){return Object.keys(c)},a.resolve=s,e.exports=a,a.id=34},57:function(e,t,n){var c={"./organ-blue-infected.png":109,"./organ-green-infected.png":110,"./organ-red-infected.png":111,"./organ-yellow-infected.png":112};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}a.keys=function(){return Object.keys(c)},a.resolve=s,e.exports=a,a.id=57},58:function(e,t,n){var c={"./organ-blue-treated.png":113,"./organ-green-treated.png":114,"./organ-red-treated.png":115,"./organ-yellow-treated.png":116};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}a.keys=function(){return Object.keys(c)},a.resolve=s,e.exports=a,a.id=58},59:function(e,t,n){var c={"./organ-blue-cured.png":117,"./organ-green-cured.png":118,"./organ-red-cured.png":119,"./organ-yellow-cured.png":120};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}a.keys=function(){return Object.keys(c)},a.resolve=s,e.exports=a,a.id=59}},[[339,1,2]]]);
//# sourceMappingURL=main.834abd44.chunk.js.map